{"version":3,"sources":["app.js"],"names":["page","userDate","name","date","hour","services","init","showServices","showSection","changeSection","nextPage","prevPage","buttonPage","showResume","nameUserDate","dateUserDate","disableDates","hourUserDate","prevSection","document","querySelector","classList","remove","add","prevTab","querySelectorAll","forEach","link","addEventListener","e","preventDefault","parseInt","target","dataset","tab","async","result","fetch","db","json","servicios","service","id","nombre","precio","console","log","serviceName","createElement","textContent","servicePrice","serviceDIV","idService","onclick","serviceSelected","appendChild","error","element","tagName","parentElement","contains","deleteService","addService","firstElementChild","price","nextElementSibling","filter","serviceObj","resumeSection","firstChild","removeChild","Object","values","includes","length","noData","dateName","innerHTML","dateDay","dateHour","clientInfo","dateResume","serviceInfo","total","s","serviceContainer","serviceText","serviceTotal","split","trim","totalPrice","inputName","value","showAlert","mssg","type","alert","setTimeout","inputDate","Date","getUTCDay","actualDate","year","getFullYear","month","getMonth","day","getDate","minDisableDate","maxDisableDate","min","max","inputHour"],"mappings":"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","file":"bundle.js","sourcesContent":["let page = 1;\r\n\r\nconst userDate = {\r\n    name : '',\r\n    date : '',\r\n    hour : '',\r\n    services : []\r\n}\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    init();\r\n});\r\n\r\nfunction init() {\r\n    showServices();\r\n\r\n    //Resalta el div actual segun el tab al que se presiona\r\n    showSection();\r\n    //Oculta o muestra segun el tab al que se presiona\r\n    changeSection();\r\n\r\n    //Paginacion siguiente y anterior\r\n    nextPage();\r\n    prevPage();\r\n\r\n    //Comprueba la pagina actual para ocultar o mostrar la paginacion\r\n    buttonPage();\r\n\r\n    //Muestra el resumen de la cita o mensaje de error en caso de no pasar la validacion\r\n    showResume();\r\n    \r\n    //Almacena el nombre de la cita en el objeto\r\n    nameUserDate();\r\n\r\n    //Almacena la fecha de la cita en el objeto\r\n    dateUserDate();\r\n\r\n    //Deshabilita fechas\r\n    disableDates();\r\n\r\n    //Almacena la hora de la cita en el objeto\r\n    hourUserDate();\r\n}\r\n\r\nfunction showSection() {\r\n\r\n    const prevSection = document.querySelector('.show-section');\r\n    //Eliminar clase show section de la seccion anterior\r\n    if(prevSection) {\r\n        prevSection.classList.remove('show-section');\r\n    }\r\n    const actualSection = document.querySelector(`#tab-${page}`);\r\n    actualSection.classList.add('show-section');\r\n\r\n    const prevTab = document.querySelector('.tabs .actual');\r\n    //Eliminar la clase actual en el tab anterior\r\n    if(prevTab){\r\n        prevTab.classList.remove('actual')\r\n    }\r\n    //Resalta el tab actual\r\n    const actualTab = document.querySelector(`[data-tab=\"${page}\"]`);\r\n    actualTab.classList.add('actual');\r\n}\r\n\r\nfunction changeSection() {\r\n    const links = document.querySelectorAll('.tabs button');\r\n    links.forEach(link => {\r\n        link.addEventListener('click', e => {\r\n            e.preventDefault();\r\n            page = parseInt(e.target.dataset.tab);\r\n            showSection();\r\n            buttonPage();\r\n        });\r\n    });\r\n}\r\n\r\n\r\nasync function showServices () {\r\n    try {\r\n        const result = await fetch('../../services.json');\r\n        const db = await result.json();\r\n        const {servicios} = db;\r\n        //Generar el HTML\r\n        servicios.forEach( service => {\r\n            const {id, nombre, precio} = service;\r\n            console.log(service);\r\n            //DOM Scripting\r\n            //Generar nombre servicio\r\n            const serviceName = document.createElement('P');\r\n            serviceName.textContent = nombre;\r\n            serviceName.classList.add('service-name');\r\n            serviceName.classList.add('no-margin');\r\n\r\n            //Generar precio servicio\r\n            const servicePrice = document.createElement('P');\r\n            servicePrice.textContent = `$ ${precio}`;\r\n            servicePrice.classList.add('service-price');\r\n            servicePrice.classList.add('no-margin');\r\n\r\n\r\n            //Generar div contenedor de servicio\r\n            const serviceDIV = document.createElement('DIV');\r\n            serviceDIV.classList.add('service');\r\n            serviceDIV.dataset.idService = id;\r\n            //Selecciona un servicio para la cita\r\n            serviceDIV.onclick = serviceSelected;\r\n\r\n\r\n            //Inyectar nombre y precio al div\r\n            serviceDIV.appendChild(serviceName);\r\n            serviceDIV.appendChild(servicePrice);\r\n\r\n            //Inyectar al HTML\r\n            document.querySelector('#services').appendChild(serviceDIV);\r\n            \r\n        });\r\n\r\n\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\n\r\nfunction serviceSelected(e) {\r\n    //FOrzar que el elemento al que le damos click sea al div\r\n    let element;\r\n    if(e.target.tagName === 'P') {\r\n        element = e.target.parentElement;\r\n    } else {\r\n        element = e.target;\r\n    }\r\n    if(element.classList.contains('selected')) {\r\n        element.classList.remove('selected');\r\n        const id = parseInt(element.dataset.idService);\r\n        deleteService(id);\r\n    }else {\r\n        element.classList.add('selected');\r\n        \r\n        const serviceObj = {\r\n            id : parseInt(element.dataset.idService),\r\n            name : element.firstElementChild.textContent,\r\n            price : element.firstElementChild.nextElementSibling.textContent\r\n        }\r\n        \r\n        addService(serviceObj);\r\n    }\r\n    \r\n}\r\n\r\nfunction deleteService(id) {\r\n    const {services} = userDate;\r\n    userDate.services = services.filter(service => service.id !== id);\r\n}\r\n\r\nfunction addService(serviceObj) {\r\n    const { services } = userDate;\r\n    userDate.services = [...services, serviceObj];\r\n}\r\n\r\nfunction nextPage() {\r\n    const nextPage = document.querySelector('#next');\r\n    nextPage.addEventListener('click', () => {\r\n        page++;\r\n        buttonPage();\r\n    });\r\n}\r\n\r\nfunction prevPage() {\r\n    const prevPage = document.querySelector('#prev');\r\n    prevPage.addEventListener('click', () => {\r\n        page--;\r\n        buttonPage();\r\n    });\r\n}\r\n\r\nfunction buttonPage() {\r\n    const nextPage = document.querySelector('#next');\r\n    const prevPage = document.querySelector('#prev');\r\n\r\n    if(page === 1) {\r\n        prevPage.classList.add('hide');\r\n        nextPage.classList.remove('hide');\r\n    }else if(page === 3) {\r\n        nextPage.classList.add('hide');\r\n        prevPage.classList.remove('hide');\r\n        showResume();\r\n    }else {\r\n        prevPage.classList.remove('hide');\r\n        nextPage.classList.remove('hide');\r\n    }\r\n\r\n    showSection();\r\n}\r\n\r\nfunction showResume() {\r\n    \r\n    //Destructuring al objeto\r\n    const {name, date, hour, services} = userDate;\r\n\r\n    //Seleccionar la seccion de resumen(3)\r\n    const resumeSection = document.querySelector('#tab-3');\r\n\r\n    //Limpiamos el HTMl previo\r\n    while(resumeSection.firstChild) {\r\n        resumeSection.removeChild(resumeSection.firstChild);\r\n    }\r\n    //Validacion de objeto\r\n    if(Object.values(userDate).includes('') || userDate.services.length === 0) {\r\n        const noData = document.createElement('P');\r\n        noData.textContent = 'Faltan datos de servicios, hora, fecha o nombre';\r\n        noData.classList.add('invalid-date');\r\n        //Agregar a la seccion de resumen\r\n        resumeSection.appendChild(noData);\r\n        return;\r\n    } \r\n\r\n    //Mostramos el remsumen\r\n    const dateName = document.createElement('P');\r\n    dateName.innerHTML = `<span>Nombre:</span> ${name}`;\r\n\r\n    const dateDay = document.createElement('P');\r\n    dateDay.innerHTML = `<span>Fecha:</span> ${date}`;\r\n\r\n    const dateHour = document.createElement('P');\r\n    dateHour.innerHTML = `<span>Hora:</span> ${hour}`;\r\n\r\n    const clientInfo = document.createElement('H3');\r\n    clientInfo.textContent = 'Resumen Cita';\r\n\r\n    const dateResume = document.createElement('DIV');\r\n    dateResume.classList.add('services-resume');\r\n\r\n    const serviceInfo = document.createElement('H3');\r\n    serviceInfo.textContent = 'Servicios';\r\n\r\n    let total = 0;\r\n\r\n    //Iterar sobre el arreglo de servicios\r\n    services.forEach(s => {\r\n        const serviceContainer = document.createElement('DIV');\r\n        serviceContainer.classList.add('service-container');\r\n        const serviceText = document.createElement('P');\r\n        serviceText.textContent = s.name;\r\n        const servicePrice = document.createElement('P');\r\n        servicePrice.textContent = s.price;\r\n        servicePrice.classList.add('service-price');\r\n        const serviceTotal = s.price.split('$');\r\n        total += parseInt(serviceTotal[1].trim());\r\n        //Colocar texto y precio en el DIV\r\n        serviceContainer.appendChild(serviceText);\r\n        serviceContainer.appendChild(servicePrice);\r\n        dateResume.appendChild(serviceContainer);\r\n    });\r\n    \r\n    resumeSection.appendChild(clientInfo);\r\n    resumeSection.appendChild(dateName);\r\n    resumeSection.appendChild(dateDay);\r\n    resumeSection.appendChild(dateHour);\r\n    resumeSection.appendChild(serviceInfo);\r\n    resumeSection.appendChild(dateResume);\r\n\r\n    const totalPrice = document.createElement('P');\r\n    totalPrice.classList.add('total');\r\n    totalPrice.innerHTML = `<span>Total a pagar: </span> $${total}`;\r\n    resumeSection.appendChild(totalPrice);\r\n    \r\n}\r\n\r\nfunction nameUserDate() {\r\n    const inputName = document.querySelector('#name');\r\n    inputName.addEventListener('change', e => {\r\n        const inputName = e.target.value.trim();\r\n        //Validacion\r\n        if(inputName === '' || inputName.length < 3){\r\n            showAlert('Nombre no válido', 'error');\r\n        }else {\r\n            userDate.name = inputName;\r\n        }\r\n    });\r\n}\r\n\r\nfunction showAlert(mssg, type) {\r\n    //SI hay una alerta previa entonces no crear otra\r\n    const prevAlert = document.querySelector('.alert');\r\n    if(prevAlert) {\r\n        return;\r\n    }\r\n    const alert = document.createElement('DIV');\r\n    alert.textContent = mssg;\r\n    alert.classList.add('alert');\r\n    if(type === 'error'){\r\n        alert.classList.add('error');\r\n    }\r\n    //Insertar en el HTML\r\n    const form = document.querySelector('.form');\r\n    form.appendChild(alert);\r\n\r\n    //Eliminar la alerta despues de 3 seg\r\n    setTimeout(() => {\r\n        alert.remove();\r\n    }, 3000);\r\n}\r\n\r\nfunction dateUserDate() {\r\n    const inputDate = document.querySelector('#date');\r\n    inputDate.addEventListener('change', e => {\r\n        const date = new Date(e.target.value).getUTCDay();\r\n        if([0].includes(date)) {\r\n            e.preventDefault();\r\n            inputDate.value = '';\r\n            showAlert('No abrimos los Domingos', 'error');\r\n        } else {\r\n            userDate.date = inputDate.value;\r\n        }\r\n    });\r\n}\r\n\r\nfunction disableDates() {\r\n    const inputDate = document.querySelector('#date');\r\n    const actualDate = new Date();\r\n    const year = actualDate.getFullYear();\r\n    const month = actualDate.getMonth() + 1;\r\n    const day = actualDate.getDate() + 1;\r\n    //Formato deseado: AAAA-MM-DD\r\n    const minDisableDate = `${year}-${month < 10 ? `0${month}` : month}-${day < 10 ? `0${day}` : day}`;\r\n    const maxDisableDate = `${year + 1}-${month < 10 ? `0${month}` : month}-${day < 10 ? `0${day}` : day}`;\r\n    inputDate.min = minDisableDate;\r\n    inputDate.max = maxDisableDate;\r\n}\r\n\r\nfunction hourUserDate() {\r\n    const inputHour = document.querySelector('#hour');\r\n    inputHour.addEventListener('change', e => {\r\n        const hourUserDate = e.target.value;\r\n        const hour = hourUserDate.split(':');\r\n        if(hour[0] < 10 || hour[0] >= 20) {\r\n            e.preventDefault();\r\n            inputHour.value = '';\r\n            showAlert('Abrimos 10:00 am y cerramos 8:00 pm', 'error');\r\n        } else{\r\n            userDate.hour = hourUserDate;\r\n        }\r\n    });\r\n}"]}